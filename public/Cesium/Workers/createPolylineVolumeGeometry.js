define(["./defaultValue-f6d5e6da","./Matrix3-81054f0f","./arrayRemoveDuplicates-9b636830","./BoundingRectangle-2379df5a","./Transforms-fce95115","./Matrix2-413c4048","./ComponentDatatype-ab629b88","./PolylineVolumeGeometryLibrary-2df3f067","./GeometryAttribute-81ff775c","./GeometryAttributes-1e4ddcd2","./GeometryPipeline-e049e700","./IndexDatatype-d3db4e7d","./Math-2ce22ee9","./PolygonPipeline-61ca1579","./VertexFormat-fbdec922","./combine-0c102d93","./RuntimeError-9b4ce3fb","./WebGLConstants-7f557f93","./EllipsoidTangentPlane-82f2a887","./AxisAlignedBoundingBox-39ab50d0","./IntersectionTests-357c3d7f","./Plane-6add0ae1","./PolylinePipeline-8495667b","./EllipsoidGeodesic-2723ab86","./EllipsoidRhumbLine-77eff028","./AttributeCompression-48e336db","./EncodedCartesian3-5e2017ab"],function(e,t,n,i,o,a,r,l,s,p,d,u,c,m,y,g,f,h,b,P,E,_,k,v,V,x,L){"use strict";function C(n){let i=(n=e.defaultValue(n,e.defaultValue.EMPTY_OBJECT)).polylinePositions,o=n.shapePositions;this._positions=i,this._shape=o,this._ellipsoid=t.Ellipsoid.clone(e.defaultValue(n.ellipsoid,t.Ellipsoid.WGS84)),this._cornerType=e.defaultValue(n.cornerType,l.CornerType.ROUNDED),this._vertexFormat=y.VertexFormat.clone(e.defaultValue(n.vertexFormat,y.VertexFormat.DEFAULT)),this._granularity=e.defaultValue(n.granularity,c.CesiumMath.RADIANS_PER_DEGREE),this._workerName="createPolylineVolumeGeometry";let r=1+i.length*t.Cartesian3.packedLength;r+=1+o.length*a.Cartesian2.packedLength,this.packedLength=r+t.Ellipsoid.packedLength+y.VertexFormat.packedLength+2}C.pack=function(n,i,o){let r;o=e.defaultValue(o,0);let l=n._positions,s=l.length;for(i[o++]=s,r=0;r<s;++r,o+=t.Cartesian3.packedLength)t.Cartesian3.pack(l[r],i,o);let p=n._shape;for(s=p.length,i[o++]=s,r=0;r<s;++r,o+=a.Cartesian2.packedLength)a.Cartesian2.pack(p[r],i,o);return t.Ellipsoid.pack(n._ellipsoid,i,o),o+=t.Ellipsoid.packedLength,y.VertexFormat.pack(n._vertexFormat,i,o),o+=y.VertexFormat.packedLength,i[o++]=n._cornerType,i[o]=n._granularity,i};let F=t.Ellipsoid.clone(t.Ellipsoid.UNIT_SPHERE),A=new y.VertexFormat,T={polylinePositions:void 0,shapePositions:void 0,ellipsoid:F,vertexFormat:A,cornerType:void 0,granularity:void 0};C.unpack=function(n,i,o){let r;i=e.defaultValue(i,0);let l=n[i++],s=Array(l);for(r=0;r<l;++r,i+=t.Cartesian3.packedLength)s[r]=t.Cartesian3.unpack(n,i);l=n[i++];let p=Array(l);for(r=0;r<l;++r,i+=a.Cartesian2.packedLength)p[r]=a.Cartesian2.unpack(n,i);let d=t.Ellipsoid.unpack(n,i,F);i+=t.Ellipsoid.packedLength;let u=y.VertexFormat.unpack(n,i,A);i+=y.VertexFormat.packedLength;let c=n[i++],m=n[i];return e.defined(o)?(o._positions=s,o._shape=p,o._ellipsoid=t.Ellipsoid.clone(d,o._ellipsoid),o._vertexFormat=y.VertexFormat.clone(u,o._vertexFormat),o._cornerType=c,o._granularity=m,o):(T.polylinePositions=s,T.shapePositions=p,T.cornerType=c,T.granularity=m,new C(T))};let G=new i.BoundingRectangle;return C.createGeometry=function(e){let a=e._positions,c=n.arrayRemoveDuplicates(a,t.Cartesian3.equalsEpsilon),y=e._shape;if(y=l.PolylineVolumeGeometryLibrary.removeDuplicatesFromShape(y),c.length<2||y.length<3)return;m.PolygonPipeline.computeWindingOrder2D(y)===m.WindingOrder.CLOCKWISE&&y.reverse();let g=i.BoundingRectangle.fromPoints(y,G);return function(e,t,n,i){let a,c,y,g,f,h;let b=new p.GeometryAttributes;i.position&&(b.position=new s.GeometryAttribute({componentDatatype:r.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:e}));let P=t.length,E=e.length/3,_=(E-2*P)/(2*P),k=m.PolygonPipeline.triangulate(t),v=(_-1)*P*6+2*k.length,V=u.IndexDatatype.createTypedArray(E,v),x=2*P,L=0;for(a=0;a<_-1;a++){for(c=0;c<P-1;c++)h=(y=2*c+a*P*2)+x,f=(g=y+1)+x,V[L++]=g,V[L++]=y,V[L++]=f,V[L++]=f,V[L++]=y,V[L++]=h;f=(g=(y=2*P-2+a*P*2)+1)+x,h=y+x,V[L++]=g,V[L++]=y,V[L++]=f,V[L++]=f,V[L++]=y,V[L++]=h}if(i.st||i.tangent||i.bitangent){let e=new Float32Array(2*E),i=1/(_-1),o=1/n.height,l=n.height/2,p,d,u=0;for(a=0;a<_;a++){for(p=a*i,d=o*(t[0].y+l),e[u++]=p,e[u++]=d,c=1;c<P;c++)d=o*(t[c].y+l),e[u++]=p,e[u++]=d,e[u++]=p,e[u++]=d;d=o*(t[0].y+l),e[u++]=p,e[u++]=d}for(c=0;c<P;c++)p=0,d=o*(t[c].y+l),e[u++]=p,e[u++]=d;for(c=0;c<P;c++)p=(_-1)*i,d=o*(t[c].y+l),e[u++]=p,e[u++]=d;b.st=new s.GeometryAttribute({componentDatatype:r.ComponentDatatype.FLOAT,componentsPerAttribute:2,values:new Float32Array(e)})}let C=E-2*P;for(a=0;a<k.length;a+=3){let e=k[a]+C,t=k[a+1]+C,n=k[a+2]+C;V[L++]=e,V[L++]=t,V[L++]=n,V[L++]=n+P,V[L++]=t+P,V[L++]=e+P}let F=new s.Geometry({attributes:b,indices:V,boundingSphere:o.BoundingSphere.fromVertices(e),primitiveType:s.PrimitiveType.TRIANGLES});if(i.normal&&(F=d.GeometryPipeline.computeNormal(F)),i.tangent||i.bitangent){try{F=d.GeometryPipeline.computeTangentAndBitangent(F)}catch(e){l.oneTimeWarning("polyline-volume-tangent-bitangent","Unable to compute tangents and bitangents for polyline volume geometry")}i.tangent||(F.attributes.tangent=void 0),i.bitangent||(F.attributes.bitangent=void 0),i.st||(F.attributes.st=void 0)}return F}(l.PolylineVolumeGeometryLibrary.computePositions(c,y,g,e,!0),y,g,e._vertexFormat)},function(n,i){return e.defined(i)&&(n=C.unpack(n,i)),n._ellipsoid=t.Ellipsoid.clone(n._ellipsoid),C.createGeometry(n)}});