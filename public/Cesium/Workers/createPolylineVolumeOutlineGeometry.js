define(["./defaultValue-f6d5e6da","./Matrix3-81054f0f","./arrayRemoveDuplicates-9b636830","./BoundingRectangle-2379df5a","./Transforms-fce95115","./Matrix2-413c4048","./ComponentDatatype-ab629b88","./PolylineVolumeGeometryLibrary-2df3f067","./GeometryAttribute-81ff775c","./GeometryAttributes-1e4ddcd2","./IndexDatatype-d3db4e7d","./Math-2ce22ee9","./PolygonPipeline-61ca1579","./combine-0c102d93","./RuntimeError-9b4ce3fb","./WebGLConstants-7f557f93","./EllipsoidTangentPlane-82f2a887","./AxisAlignedBoundingBox-39ab50d0","./IntersectionTests-357c3d7f","./Plane-6add0ae1","./PolylinePipeline-8495667b","./EllipsoidGeodesic-2723ab86","./EllipsoidRhumbLine-77eff028"],function(e,t,i,n,o,l,a,r,s,p,d,u,c,y,f,g,h,m,E,P,_,b,k){"use strict";function C(i){let n=(i=e.defaultValue(i,e.defaultValue.EMPTY_OBJECT)).polylinePositions,o=i.shapePositions;this._positions=n,this._shape=o,this._ellipsoid=t.Ellipsoid.clone(e.defaultValue(i.ellipsoid,t.Ellipsoid.WGS84)),this._cornerType=e.defaultValue(i.cornerType,r.CornerType.ROUNDED),this._granularity=e.defaultValue(i.granularity,u.CesiumMath.RADIANS_PER_DEGREE),this._workerName="createPolylineVolumeOutlineGeometry";let a=1+n.length*t.Cartesian3.packedLength;a+=1+o.length*l.Cartesian2.packedLength,this.packedLength=a+t.Ellipsoid.packedLength+2}C.pack=function(i,n,o){let a;o=e.defaultValue(o,0);let r=i._positions,s=r.length;for(n[o++]=s,a=0;a<s;++a,o+=t.Cartesian3.packedLength)t.Cartesian3.pack(r[a],n,o);let p=i._shape;for(s=p.length,n[o++]=s,a=0;a<s;++a,o+=l.Cartesian2.packedLength)l.Cartesian2.pack(p[a],n,o);return t.Ellipsoid.pack(i._ellipsoid,n,o),o+=t.Ellipsoid.packedLength,n[o++]=i._cornerType,n[o]=i._granularity,n};let L=t.Ellipsoid.clone(t.Ellipsoid.UNIT_SPHERE),T={polylinePositions:void 0,shapePositions:void 0,ellipsoid:L,height:void 0,cornerType:void 0,granularity:void 0};C.unpack=function(i,n,o){let a;n=e.defaultValue(n,0);let r=i[n++],s=Array(r);for(a=0;a<r;++a,n+=t.Cartesian3.packedLength)s[a]=t.Cartesian3.unpack(i,n);r=i[n++];let p=Array(r);for(a=0;a<r;++a,n+=l.Cartesian2.packedLength)p[a]=l.Cartesian2.unpack(i,n);let d=t.Ellipsoid.unpack(i,n,L);n+=t.Ellipsoid.packedLength;let u=i[n++],c=i[n];return e.defined(o)?(o._positions=s,o._shape=p,o._ellipsoid=t.Ellipsoid.clone(d,o._ellipsoid),o._cornerType=u,o._granularity=c,o):(T.polylinePositions=s,T.shapePositions=p,T.cornerType=u,T.granularity=c,new C(T))};let D=new n.BoundingRectangle;return C.createGeometry=function(e){let l=e._positions,u=i.arrayRemoveDuplicates(l,t.Cartesian3.equalsEpsilon),y=e._shape;if(y=r.PolylineVolumeGeometryLibrary.removeDuplicatesFromShape(y),u.length<2||y.length<3)return;c.PolygonPipeline.computeWindingOrder2D(y)===c.WindingOrder.CLOCKWISE&&y.reverse();let f=n.BoundingRectangle.fromPoints(y,D);return function(e,t){let i=new p.GeometryAttributes;i.position=new s.GeometryAttribute({componentDatatype:a.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:e});let n=t.length,l=i.position.values.length/3,r=e.length/3/n,u=d.IndexDatatype.createTypedArray(l,2*n*(r+1)),c,y,f=0,g=(c=0)*n;for(y=0;y<n-1;y++)u[f++]=y+g,u[f++]=y+g+1;for(u[f++]=n-1+g,u[f++]=g,g=(c=r-1)*n,y=0;y<n-1;y++)u[f++]=y+g,u[f++]=y+g+1;for(u[f++]=n-1+g,u[f++]=g,c=0;c<r-1;c++){let e=n*c,t=e+n;for(y=0;y<n;y++)u[f++]=y+e,u[f++]=y+t}return new s.Geometry({attributes:i,indices:d.IndexDatatype.createTypedArray(l,u),boundingSphere:o.BoundingSphere.fromVertices(e),primitiveType:s.PrimitiveType.LINES})}(r.PolylineVolumeGeometryLibrary.computePositions(u,y,f,e,!1),y)},function(i,n){return e.defined(n)&&(i=C.unpack(i,n)),i._ellipsoid=t.Ellipsoid.clone(i._ellipsoid),C.createGeometry(i)}});